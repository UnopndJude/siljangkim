# Claude 작업 지침

## 문서 읽기 우선순위

Claude는 작업을 시작하기 전에 다음 순서로 문서를 참조해야 합니다:

1. **/.claude/project-rules.md** - 프로젝트 규칙과 컨벤션
2. **/.claude/context.md** - 프로젝트 컨텍스트와 현재 상태
3. **/docs/technical-spec.md** - 기술 사양서 (DDD 아키텍처)
4. **/CLAUDE.md** - 프로젝트 전체 개요
5. 관련 docs/ 폴더의 특정 문서들

## 코드 작성 시 확인사항

### 1. 아키텍처 준수
- [ ] DDD 레이어 의존성 규칙 확인
- [ ] 도메인 모델의 무결성 유지
- [ ] Use Case를 통한 비즈니스 로직 처리

### 2. 코딩 컨벤션
- [ ] TypeScript strict mode 사용
- [ ] 네이밍 규칙 준수
- [ ] Import 순서 정리
- [ ] 적절한 타입 정의

### 3. 보안 검증
- [ ] 사용자 입력 검증
- [ ] 인증/권한 확인
- [ ] SQL Injection 방지
- [ ] XSS 방지

### 4. UI/UX 일관성
- [ ] 기존 컴포넌트 재사용
- [ ] Tailwind CSS 사용
- [ ] 반응형 디자인 적용
- [ ] 접근성 고려

## 파일 생성/수정 가이드

### 새 기능 구현 시
1. 도메인 모델부터 시작 (Entity, Value Object)
2. Use Case 구현
3. Repository 인터페이스 정의
4. Infrastructure 구현체 작성
5. API Route 또는 Server Action 구현
6. UI 컴포넌트 구현

### 기존 코드 수정 시
1. 관련 문서 확인
2. 기존 패턴 분석
3. 일관성 유지하며 수정
4. 영향 범위 고려

## 문서 업데이트 규칙

코드 변경 시 관련 문서도 함께 업데이트:

- API 변경 → api-documentation.md 업데이트
- DB 스키마 변경 → database-schema.md 업데이트
- 아키텍처 변경 → technical-spec.md 업데이트
- 배포 관련 변경 → deployment-guide.md 업데이트
- 보안 관련 변경 → security-guidelines.md 업데이트

## 에러 처리 방침

### 도메인 레벨
- 비즈니스 규칙 위반 시 명확한 에러 메시지
- 값 객체 생성 실패 시 검증 에러

### 애플리케이션 레벨
- Use Case 실행 실패 시 적절한 에러 반환
- 권한 검증 실패 시 403 응답

### UI 레벨
- 사용자 친화적인 에러 메시지
- 폼 검증 실패 시 필드별 안내

## 테스트 작성 방침

### 필수 테스트
- 도메인 엔티티의 비즈니스 로직
- 값 객체의 검증 로직
- Use Case의 핵심 시나리오

### 권장 테스트
- API Route의 응답 형식
- 컴포넌트의 렌더링
- 통합 테스트

## 성능 고려사항

### 데이터베이스
- N+1 문제 방지 (Prisma include 사용)
- 적절한 인덱스 확인
- 페이지네이션 구현

### 프론트엔드
- 불필요한 리렌더링 방지
- 적절한 코드 스플리팅
- 이미지 최적화

## 작업 완료 체크리스트

- [ ] 프로젝트 규칙 준수 확인
- [ ] 타입 에러 없음
- [ ] 린터 에러 없음
- [ ] 관련 문서 업데이트
- [ ] 기존 기능 영향 없음
- [ ] 보안 검증 완료