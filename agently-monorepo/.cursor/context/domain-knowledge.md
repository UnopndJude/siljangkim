# 도메인 지식 (Domain Knowledge)

## 의료계 커뮤니티 플랫폼 개요

### 플랫폼 목적
Agently는 의료진(의사, 코디네이터)과 환자 간의 신뢰할 수 있는 커뮤니티 플랫폼으로, 투명한 리뷰 시스템을 통해 의료 서비스의 질을 향상시키고 의료진의 전문성을 검증할 수 있는 환경을 제공합니다.

### 핵심 가치
- **투명성**: 공개된 리뷰 시스템을 통한 의료 서비스 투명성 확보
- **신뢰성**: 검증된 의료진과 신뢰할 수 있는 리뷰 시스템
- **전문성**: 의료계 전문 지식을 바탕으로 한 정확한 정보 제공
- **커뮤니티**: 의료진과 환자 간의 건전한 소통 문화 조성

## 의료계 이해

### 의료진 분류

#### 1. 의사 (Doctor)
- **정의**: 의사면허를 소지한 의료진
- **자격 요건**: 의사면허, 전문의 자격 (선택사항)
- **역할**: 환자 진료, 의료 서비스 제공
- **특징**: 특정 전문 분야 보유, 병원/클리닉 소속

#### 2. 코디네이터 (Coordinator)
- **정의**: 의료진과 환자 간의 중개 역할을 하는 전문가
- **자격 요건**: 의료 관련 학위 또는 자격증
- **역할**: 의료진-환자 매칭, 의료 서비스 조정
- **특징**: 특정 전문 분야 전문성, 의료진 네트워크 보유

#### 3. 환자 (Patient)
- **정의**: 의료 서비스를 받는 사용자
- **역할**: 의료진 선택, 리뷰 작성, 의료 서비스 이용
- **특징**: 다양한 의료 서비스 경험, 리뷰를 통한 정보 공유

### 의료 전문 분야

#### 내과 (Internal Medicine)
- **범위**: 내부 장기 질환 진료
- **하위 분야**: 심장내과, 소화기내과, 신장내과, 내분비내과
- **특징**: 비수술적 치료 중심

#### 외과 (Surgery)
- **범위**: 수술적 치료가 필요한 질환
- **하위 분야**: 일반외과, 정형외과, 신경외과, 흉부외과
- **특징**: 수술적 치료 중심

#### 소아과 (Pediatrics)
- **범위**: 소아 및 청소년 질환 진료
- **특징**: 연령별 특화된 진료 방법

#### 산부인과 (Obstetrics and Gynecology)
- **범위**: 여성 생식기 질환, 임신 및 출산
- **특징**: 여성 건강 전반 관리

#### 정신과 (Psychiatry)
- **범위**: 정신 질환 진료
- **특징**: 정신 건강 관리, 상담 치료

### 의료 라이선스 시스템

#### 의사면허
- **형식**: MD + 6자리 숫자 (예: MD123456)
- **발급 기관**: 보건복지부
- **유효 기간**: 평생 유효 (단, 갱신 필요)
- **검증 방법**: 보건복지부 의료진 등록 시스템 조회

#### 전문의 자격
- **취득 과정**: 전공의 수료 후 전문의 시험 통과
- **분야**: 내과, 외과, 소아과, 산부인과, 정신과 등
- **유효 기간**: 평생 유효
- **검증 방법**: 대한의사협회 전문의 등록 시스템 조회

## 비즈니스 로직

### 리뷰 시스템

#### 리뷰 작성 규칙
1. **작성 자격**: 인증된 사용자만 작성 가능
2. **대상 제한**: 본인에 대한 리뷰 작성 불가
3. **내용 제한**: 의료법 위반 내용 금지
4. **검증 과정**: 관리자 승인 후 공개

#### 리뷰 평가 기준
- **진료 품질**: 의료 서비스의 전문성과 정확성
- **친절도**: 의료진의 태도와 소통 능력
- **대기시간**: 예약 대기 및 진료 대기 시간
- **시설 환경**: 병원/클리닉의 시설과 환경

#### 리뷰 관리
- **수정/삭제**: 작성자만 가능
- **신고 기능**: 부적절한 리뷰 신고 가능
- **관리자 검토**: 신고된 리뷰 검토 후 조치

### 매칭 시스템

#### 코디네이터-의사 매칭
1. **전문 분야 일치**: 동일한 전문 분야 필수
2. **상호 동의**: 양쪽 모두 동의해야 매칭 성립
3. **지역 고려**: 지역적 근접성 고려
4. **경력 고려**: 경력과 전문성 고려

#### 환자-의료진 연결
1. **검색 및 필터링**: 다양한 조건으로 검색
2. **상담 요청**: 의료진에게 상담 요청
3. **예약 시스템**: 진료 예약 기능
4. **메시징**: 의료진과 직접 소통

### 검색 및 필터링

#### 검색 조건
- **전문 분야**: 내과, 외과, 소아과 등
- **지역**: 시/도, 구/군 단위
- **평점**: 최소 평점 설정
- **경력**: 최소 경력 기간
- **소속**: 병원/클리닉명

#### 정렬 기준
- **평점순**: 높은 평점부터
- **리뷰 수순**: 많은 리뷰부터
- **경력순**: 긴 경력부터
- **거리순**: 가까운 거리부터

## 데이터 모델

### 사용자 (User)
```typescript
interface User {
  id: string;
  email: string;
  name: string;
  phoneNumber: string;
  role: 'doctor' | 'coordinator' | 'patient';
  profileImage?: string;
  isVerified: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

### 의사 (Doctor)
```typescript
interface Doctor {
  id: string;
  userId: string;
  medicalLicenseNumber: string;
  specialty: string;
  yearsOfExperience: number;
  hospitalAffiliation: string;
  introduction: string;
  availableHours: AvailableHours;
  averageRating: number;
  reviewCount: number;
  isVerified: boolean;
}
```

### 코디네이터 (Coordinator)
```typescript
interface Coordinator {
  id: string;
  userId: string;
  specialty: string;
  yearsOfExperience: number;
  introduction: string;
  availableHours: AvailableHours;
  averageRating: number;
  reviewCount: number;
  isVerified: boolean;
}
```

### 리뷰 (Review)
```typescript
interface Review {
  id: string;
  authorId: string;
  targetId: string;
  targetType: 'doctor' | 'coordinator';
  rating: number;
  content: string;
  categories: ReviewCategories;
  images: string[];
  isAnonymous: boolean;
  status: 'pending' | 'approved' | 'rejected';
  createdAt: Date;
  updatedAt: Date;
}
```

## 비즈니스 규칙

### 인증 규칙
1. **이메일 인증**: 회원가입 시 이메일 인증 필수
2. **의료진 인증**: 의료 라이선스 번호 검증 필수
3. **전문 분야 인증**: 전문의 자격 검증 (선택사항)

### 권한 규칙
1. **리뷰 작성**: 인증된 사용자만 가능
2. **리뷰 수정/삭제**: 작성자만 가능
3. **매칭 요청**: 의사/코디네이터만 가능
4. **관리자 기능**: 관리자만 가능

### 데이터 검증 규칙
1. **의료 라이선스**: 정확한 형식 검증
2. **이메일**: 유효한 이메일 형식 검증
3. **전화번호**: 한국 전화번호 형식 검증
4. **리뷰 내용**: 의료법 위반 내용 검증

## 외부 시스템 연동

### 의료기관 시스템
- **병원 정보 시스템**: 병원/클리닉 정보 조회
- **의료진 등록 시스템**: 의료진 자격 검증
- **진료 예약 시스템**: 예약 정보 연동

### 인증 시스템
- **보건복지부**: 의료진 자격 검증
- **대한의사협회**: 전문의 자격 검증
- **소셜 로그인**: Google, Naver 연동

### 결제 시스템
- **결제 서비스**: 진료비 결제 연동
- **보험 연동**: 건강보험 정보 연동
- **영수증 발급**: 진료비 영수증 발급

## 보안 및 개인정보 보호

### 개인정보 보호
1. **의료 정보**: 특별한 보안 처리 필요
2. **개인 식별 정보**: 암호화 저장
3. **접근 로그**: 모든 접근 기록 보관
4. **데이터 마스킹**: 민감한 정보 마스킹

### 보안 규칙
1. **HTTPS 통신**: 모든 통신 암호화
2. **JWT 토큰**: 안전한 인증 토큰 사용
3. **입력 검증**: 모든 입력 데이터 검증
4. **SQL 인젝션 방지**: 파라미터화된 쿼리 사용

## 성능 및 확장성

### 성능 요구사항
1. **응답 시간**: API 응답 200ms 이하
2. **동시 사용자**: 1,000명 동시 접속
3. **데이터베이스**: 쿼리 응답 100ms 이하
4. **파일 업로드**: 이미지 업로드 5초 이내

### 확장성 전략
1. **마이크로서비스**: 서비스별 분리
2. **데이터베이스**: 읽기 전용 복제본
3. **캐싱**: Redis를 활용한 캐싱
4. **CDN**: 정적 파일 CDN 배포

## 모니터링 및 로깅

### 모니터링 지표
1. **시스템 성능**: CPU, 메모리, 디스크 사용률
2. **응용 성능**: API 응답 시간, 에러율
3. **비즈니스 지표**: 사용자 수, 리뷰 수, 매칭 수
4. **보안 지표**: 로그인 시도, 의심스러운 활동

### 로깅 규칙
1. **로그 레벨**: ERROR, WARN, INFO, DEBUG
2. **민감한 정보**: 개인정보 로깅 금지
3. **로그 보관**: 1년간 보관
4. **로그 분석**: 정기적인 로그 분석
